__DIALOG_WRAPPER__={};DialogManager={"create":function(b){var a={};if(!__DIALOG_WRAPPER__[b]){a=new Dialog(b);__DIALOG_WRAPPER__[b]=a}else{a=DialogManager.get(b)}return a},"get":function(a){return __DIALOG_WRAPPER__[a]},"set":function(b,a){__DIALOG_WRAPPER__[b]=a},"close":function(a){if(__DIALOG_WRAPPER__[a].close()){__DIALOG_WRAPPER__[a]=null}},"onClose":function(){return true},"loadStyle":function(){var c=$("#dialog_js").attr("src");var a=c.split("/");var b=a.slice(0,a.length-1).join("/")+"/dialog.css";$("#dialog_js").after('<link href="'+b+'" rel="stylesheet" type="text/css" />')}};ScreenLocker={"style":{"position":"absolute","top":"0px","left":"0px","backgroundColor":"transparent","opacity":0,"zIndex":999},"masker":null,"lock":function(a){if(this.masker!==null){this.masker.width($(document).width()).height($(document).height());return true}this.masker=$('<div id="dialog_manage_screen_locker"></div>');this.masker.css(this.style);if(a){this.masker.css("zIndex",a)}this.masker.width($(document).width()).height($(document).height());$(document.body).append(this.masker);$("#dialog_manage_screen_locker").show()},"unlock":function(){if(this.masker===null){return true}this.masker.remove();this.masker=null}};Dialog=function(a){this.id=a;this.init()};Dialog.prototype={"id":null,"dom":null,"lastPos":null,"status":"complete","onClose":function(){return true},"tmp":{},"init":function(){this.dom={"wrapper":null,"body":null,"head":null,"title":null,"close_button":null,"content":null};this.dom.wrapper=$('<div id="fwin_'+this.id+'" class="dialog_wrapper"></div>').get(0);this.dom.body=$('<div class="dialog_body"></div>').get(0);this.dom.head=$('<h3 class="dialog_head"></h3>').get(0);this.dom.title=$('<span class="dialog_title_icon"></span>').get(0);this.dom.close_button=$('<span class="dialog_close_button">X</span>').get(0);this.dom.content=$('<div class="dialog_content"></div>').get(0);$(this.dom.head).append($('<span class="dialog_title"></span>').append(this.dom.title)).append(this.dom.close_button);$(this.dom.body).append(this.dom.head).append(this.dom.content);$(this.dom.wrapper).append(this.dom.body).append('<div style="clear:both; display:block;"></div>');$(this.dom.wrapper).css({"zIndex":1100,"display":"none","position":"absolute"});$(this.dom.body).css({"position":"relative"});$(this.dom.head).css({"cursor":"move"});$(this.dom.content).css({"margin":"0px","padding":"0px"});var a=this;$(this.dom.close_button).click(function(){DialogManager.close(a.id)});$(document.body).append(this.dom.wrapper)},"hide":function(){$(this.dom.wrapper).hide()},"show":function(b,a){if(b){this.setPosition(b)}if(a==1){ScreenLocker.lock(999)}$(this.dom.wrapper).draggable({"handle":this.dom.head});$(this.dom.wrapper).show()},"close":function(a){if(!this.onClose()){return false}$(this.dom.wrapper).remove();if(typeof a=="undefined"){ScreenLocker.unlock()}DialogManager.set(this.id,null);return true},"setTitle":function(a){$(this.dom.title).html(a)},"setContents":function(b,a){contents=this.createContents(b,a);if(typeof(contents)=="string"){$(this.dom.content).html(contents)}else{$(this.dom.content).empty();$(this.dom.content).append(contents)}},"setStyle":function(a){if(typeof(a)=="object"){$(this.dom.wrapper).css(a)}else{$(this.dom.wrapper).addClass(a)}},"setWidth":function(a){this.setStyle({"width":a+"px"})},"setHeight":function(a){this.setStyle({"height":a+"px"})},"createContents":function(type,options){var _html="",self=this,status="complete";if(!options){this.setStatus(status);return type}switch(type){case"ajax":$.get(options,function(data){self.setContents(data);self.setPosition(self.lastPos)});_html=this.createContents("loading",{"text":"loading..."});break;case"ajax_notice":$.get(options,function(data){var json=eval("("+data+")");var MsgTxt='<div class="dialog_message_body"></div><div class="dialog_message_contents dialog_message_notice">'+json.Msg+'</div><div class="dialog_buttons_bar"></div>';self.setContents(MsgTxt);self.setPosition(self.lastPos)});_html=this.createContents("loading",{"text":"正在处理..."});break;case"loading":_html='<div class="dialog_loading"><div class="dialog_loading_text">'+options.text+"</div></div>";status="loading";break;case"message":var type="notice";if(options.type){type=options.type}_message_body=$('<div class="dialog_message_body"></div>');_message_contents=$('<div class="dialog_message_contents dialog_message_'+type+'">'+options.text+"</div>");_buttons_bar=$('<div class="dialog_buttons_bar"></div>');switch(type){case"notice":case"warning":var button_name="确定";if(options.button_name){button_name=options.button_name}_ok_button=$('<input type="button" class="btn1" value="'+button_name+'" />');$(_ok_button).click(function(){if(options.onclick){if(!options.onclick.call()){return}}DialogManager.close(self.id)});$(_buttons_bar).append(_ok_button);break;case"confirm":var yes_button_name="确定";var no_button_name="取消";if(options.yes_button_name){yes_button_name=options.yes_button_name}if(options.no_button_name){no_button_name=options.no_button_name
}_yes_button=$('<input type="button" class="btn1" value="'+yes_button_name+'" />');_no_button=$('<input type="button" class="btn2" value="'+no_button_name+'" />');$(_yes_button).click(function(){if(options.onClickYes){if(options.onClickYes.call()===false){return}}DialogManager.close(self.id)});$(_no_button).click(function(){if(options.onClickNo){if(!options.onClickNo.call()){return}}DialogManager.close(self.id)});$(_buttons_bar).append(_yes_button).append(_no_button);break}_html=$(_message_body).append(_message_contents).append(_buttons_bar);break}this.setStatus(status);return _html},"setPosition":function(g){this.lastPos=g;if(typeof(g)=="string"){switch(g){case"center":var d=0;var c=0;var b=$(this.dom.wrapper).width();var f=$(this.dom.wrapper).height();d=$(window).scrollLeft()+($(window).width()-b)/2;c=$(window).scrollTop()+($(window).height()-f)/2;$(this.dom.wrapper).css({left:d+"px",top:c+"px"});break}}else{var a={};if(typeof(g.left)!="undefined"){a.left=g.left}if(typeof(g.top)!="undefined"){a.top=g.top}$(this.dom.wrapper).css(a)}},"setStatus":function(a){this.status=a},"getStatus":function(){return this.status},"disableClose":function(a){this.tmp["oldOnClose"]=this.onClose;this.onClose=function(){if(a){alert(a)}return false}},"enableClose":function(){this.onClose=this.tmp["oldOnClose"];this.tmp["oldOnClose"]=null}};DialogManager.loadStyle();DIALOGIMGDIR=SITEURL+"/"+"resource/js/dialog/images/dialog";var BROWSER={};var USERAGENT=navigator.userAgent.toLowerCase();browserVersion({"ie":"msie","firefox":"","chrome":"","opera":"","safari":"","mozilla":"","webkit":"","maxthon":"","qq":"qqbrowser"});if(BROWSER.safari){BROWSER.firefox=true}BROWSER.opera=BROWSER.opera?opera.version():0;HTMLNODE=document.getElementsByTagName("head")[0].parentNode;if(BROWSER.ie){BROWSER.iemode=parseInt(typeof document.documentMode!="undefined"?document.documentMode:BROWSER.ie);HTMLNODE.className="ie_all ie"+BROWSER.iemode}var JSLOADED=[];var JSMENU=[];JSMENU["active"]=[];JSMENU["timer"]=[];JSMENU["drag"]=[];JSMENU["layer"]=0;JSMENU["zIndex"]={"win":1000,"menu":1100,"dialog":1200,"prompt":1300};JSMENU["float"]="";var CURRENTSTYPE=null;var EXTRAFUNC=[],EXTRASTR="";if(BROWSER.firefox&&window.HTMLElement){HTMLElement.prototype.__defineGetter__("innerText",function(){var b="";var c=this.childNodes;for(var a=0;a<c.length;a++){if(c[a].nodeType==1){b+=c[a].tagName=="BR"?"\n":c[a].innerText}else{if(c[a].nodeType==3){b+=c[a].nodeValue}}}return b});HTMLElement.prototype.__defineSetter__("innerText",function(a){this.textContent=a});HTMLElement.prototype.__defineSetter__("outerHTML",function(b){var a=this.ownerDocument.createRange();a.setStartBefore(this);var c=a.createContextualFragment(b);this.parentNode.replaceChild(c,this);return b});HTMLElement.prototype.__defineGetter__("outerHTML",function(){var a;var b=this.attributes;var d="<"+this.tagName.toLowerCase();for(var c=0;c<b.length;c++){a=b[c];if(a.specified){d+=" "+a.name+'="'+a.value+'"'}}if(!this.canHaveChildren){return d+">"}return d+">"+this.innerHTML+"</"+this.tagName.toLowerCase()+">"});HTMLElement.prototype.__defineGetter__("canHaveChildren",function(){switch(this.tagName.toLowerCase()){case"area":case"base":case"basefont":case"col":case"frame":case"hr":case"img":case"br":case"input":case"isindex":case"link":case"meta":case"param":return false}return true})}function $$(a){return !a?null:document.getElementById(a)}function _attachEvent(d,b,c,a){a=!a?d:a;if(d.addEventListener){d.addEventListener(b,c,false)}else{if(a.attachEvent){d.attachEvent("on"+b,c)}}}function browserVersion(types){var other=1;for(i in types){var v=types[i]?types[i]:i;if(USERAGENT.indexOf(v)!=-1){var re=new RegExp(v+"(\\/|\\s)([\\d\\.]+)","ig");var matches=re.exec(USERAGENT);var ver=matches!=null?matches[2]:0;other=ver!==0&&v!="mozilla"?0:other}else{var ver=0}eval("BROWSER."+i+"= ver")}BROWSER.other=other}function getEvent(){if(document.all){return window.event}func=getEvent.caller;while(func!=null){var a=func.arguments[0];if(a){if((a.constructor==Event||a.constructor==MouseEvent)||(typeof(a)=="object"&&a.preventDefault&&a.stopPropagation)){return a}}func=func.caller}return null}function isUndefined(a){return typeof a=="undefined"?true:false}function in_array(c,b){if(typeof c=="string"||typeof c=="number"){for(var a in b){if(b[a]==c){return true}}}return false}function strlen(a){return(BROWSER.ie&&a.indexOf("\n")!=-1)?a.replace(/\r?\n/g,"_").length:a.length}function Ajax(b,a){var c=new Object();c.loading="请稍候...";c.recvType=b?b:"XML";c.waitId=a?$$(a):null;c.resultHandle=null;c.sendString="";c.targetUrl="";c.setLoading=function(d){if(typeof d!=="undefined"&&d!==null){c.loading=d}};c.setRecvType=function(d){c.recvType=d};c.setWaitId=function(d){c.waitId=typeof d=="object"?d:$$(d)};c.createXMLHttpRequest=function(){var g=false;if(window.XMLHttpRequest){g=new XMLHttpRequest();if(g.overrideMimeType){g.overrideMimeType("text/xml")}}else{if(window.ActiveXObject){var d=["Microsoft.XMLHTTP","MSXML.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.7.0","Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"];
for(var f=0;f<d.length;f++){try{g=new ActiveXObject(d[f]);if(g){return g}}catch(h){}}}}return g};c.XMLHttpRequest=c.createXMLHttpRequest();c.showLoading=function(){if(c.waitId&&(c.XMLHttpRequest.readyState!=4||c.XMLHttpRequest.status!=200)){c.waitId.style.display="";c.waitId.innerHTML='<span><img src="'+DIALOGIMGDIR+'/loading.gif" class="vm"> '+c.loading+"</span>"}};c.processHandle=function(){if(c.XMLHttpRequest.readyState==4&&c.XMLHttpRequest.status==200){if(c.waitId){c.waitId.style.display="none"}if(c.recvType=="HTML"){c.resultHandle(c.XMLHttpRequest.responseText,c)}else{if(c.recvType=="XML"){if(!c.XMLHttpRequest.responseXML||!c.XMLHttpRequest.responseXML.lastChild||c.XMLHttpRequest.responseXML.lastChild.localName=="parsererror"){c.resultHandle('<a href="'+c.targetUrl+'" target="_blank" style="color:red">内部错误，无法显示此内容</a>',c)}else{c.resultHandle(c.XMLHttpRequest.responseXML.lastChild.firstChild.nodeValue,c)}}}}};c.get=function(g,d){g=hostconvert(g);setTimeout(function(){c.showLoading()},250);c.targetUrl=g;c.XMLHttpRequest.onreadystatechange=c.processHandle;c.resultHandle=d;var f=isUndefined(f)?0:f;if(window.XMLHttpRequest){c.XMLHttpRequest.open("GET",c.targetUrl);c.XMLHttpRequest.setRequestHeader("X-Requested-With","XMLHttpRequest");c.XMLHttpRequest.send(null)}else{c.XMLHttpRequest.open("GET",g,true);c.XMLHttpRequest.setRequestHeader("X-Requested-With","XMLHttpRequest");c.XMLHttpRequest.send()}};c.post=function(g,f,d){g=hostconvert(g);setTimeout(function(){c.showLoading()},250);c.targetUrl=g;c.sendString=f;c.XMLHttpRequest.onreadystatechange=c.processHandle;c.resultHandle=d;c.XMLHttpRequest.open("POST",g);c.XMLHttpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded");c.XMLHttpRequest.setRequestHeader("X-Requested-With","XMLHttpRequest");c.XMLHttpRequest.send(c.sendString)};return c}function getHost(b){var d="null";if(typeof b=="undefined"||null==b){b=window.location.href}var c=/^\w+\:\/\/([^\/]*).*/;var a=b.match(c);if(typeof a!="undefined"&&null!=a){d=a[1]}return d}function hostconvert(b){if(!b.match(/^http?:\/\//)){b=SITEURL.replace(/(\/+)$/g,"")+"/"+b}var a=getHost(b);var c=getHost().toLowerCase();if(a&&c!=a){b=b.replace(a,c)}return b}function newfunction(c){var a=[];for(var b=1;b<arguments.length;b++){a.push(arguments[b])}return function(d){doane(d);window[c].apply(window,a);return false}}function evalscript(c){if(c.indexOf("<script")==-1){return c}var d=/<script[^\>]*?>([^\x00]*?)<\/script>/ig;var a=[];while(a=d.exec(c)){var f=/<script[^\>]*?src=\"([^\>]*?)\"[^\>]*?(reload=\"1\")?(?:charset=\"([\w\-]+?)\")?><\/script>/i;var b=[];b=f.exec(a[0]);if(b){appendscript(b[1],"",b[2],b[3])}else{f=/<script(.*?)>([^\x00]+?)<\/script>/i;b=f.exec(a[0]);appendscript("",b[2],b[1].indexOf("reload=")!=-1)}}return c}var evalscripts=[];function appendscript(f,d,b,h){var g=hash(f+d);if(!b&&in_array(g,evalscripts)){return}if(b&&$$(g)){$$(g).parentNode.removeChild($$(g))}evalscripts.push(g);var a=document.createElement("script");a.type="text/javascript";a.id=g;a.charset=h?h:(BROWSER.firefox?document.characterSet:document.charset);try{if(f){a.src=f;a.onloadDone=false;a.onload=function(){a.onloadDone=true;JSLOADED[f]=1};a.onreadystatechange=function(){if((a.readyState=="loaded"||a.readyState=="complete")&&!a.onloadDone){a.onloadDone=true;JSLOADED[f]=1}}}else{if(d){a.text=d}}document.getElementsByTagName("head")[0].appendChild(a)}catch(c){}}function ajaxupdateevents(b,a){a=a?a:"A";var d=b.getElementsByTagName(a);for(k in d){var c=d[k];ajaxupdateevent(c)}}function ajaxupdateevent(b){if(typeof b=="object"&&b.getAttribute){if(b.getAttribute("ajaxtarget")){if(!b.id){b.id=Math.random()}var a=b.getAttribute("ajaxevent")?b.getAttribute("ajaxevent"):"click";var c=b.getAttribute("ajaxurl")?b.getAttribute("ajaxurl"):b.href;_attachEvent(b,a,newfunction("ajaxget",c,b.getAttribute("ajaxtarget"),b.getAttribute("ajaxwaitid"),b.getAttribute("ajaxloading"),b.getAttribute("ajaxdisplay")));if(b.getAttribute("ajaxfunc")){b.getAttribute("ajaxfunc").match(/(\w+)\((.+?)\)/);_attachEvent(b,a,newfunction(RegExp.$1,RegExp.$2))}}}}function ajaxget(url,showid,waitid,loading,display,recall){waitid=typeof waitid=="undefined"||waitid===null?showid:waitid;var x=new Ajax();x.setLoading(loading);x.setWaitId(waitid);x.display=typeof display=="undefined"||display==null?"":display;x.showId=$$(showid);if(url.substr(strlen(url)-1)=="#"){url=url.substr(0,strlen(url)-1);x.autogoto=1}var url=url+"&inajax=1&ajaxtarget=";x.get(url,function(s,x){var evaled=false;if(s.indexOf("ajaxerror")!=-1){evalscript(s);evaled=true}if(!evaled&&(typeof ajaxerror=="undefined"||!ajaxerror)){if(x.showId){x.showId.style.display=x.display;ajaxinnerhtml(x.showId,s);ajaxupdateevents(x.showId);if(x.autogoto){scroll(0,x.showId.offsetTop)}}}ajaxerror=null;if(recall&&typeof recall=="function"){recall()}else{if(recall){eval(recall)}}if(!evaled){evalscript(s)}})}function ajaxpost(formid,showid,waitid,showidclass,submitbtn,recall){var waitid=typeof waitid=="undefined"||waitid===null?showid:(waitid!==""?waitid:"");
var showidclass="";var ajaxframeid="ajaxframe";var ajaxframe=$$(ajaxframeid);var formtarget=$$(formid).target;var handleResult=function(){var s="";var evaled=false;try{s=$$(ajaxframeid).contentWindow.document.XMLDocument.text}catch(e){try{s=$$(ajaxframeid).contentWindow.document.documentElement.firstChild.wholeText}catch(e){try{s=$$(ajaxframeid).contentWindow.document.documentElement.firstChild.nodeValue}catch(e){s="内部错误，无法显示此内容"}}}if(s!=""&&s.indexOf("ajaxerror")!=-1){evalscript(s);evaled=true}if(showidclass){if(showidclass!="onerror"){$$(showid).className=showidclass}else{showError(s);ajaxerror=true}}if(submitbtn){submitbtn.disabled=false}if(!evaled&&(typeof ajaxerror=="undefined"||!ajaxerror)){}ajaxerror=null;if($$(formid)){$$(formid).target=formtarget}if(typeof recall=="function"){recall()}else{eval(recall)}if(!evaled){evalscript(s)}ajaxframe.loading=0;$$("append_parent").removeChild(ajaxframe.parentNode)};if(!ajaxframe){var div=document.createElement("div");div.style.display="none";div.innerHTML='<iframe name="'+ajaxframeid+'" id="'+ajaxframeid+'" loading="1"></iframe>';$$("append_parent").appendChild(div);ajaxframe=$$(ajaxframeid)}else{if(ajaxframe.loading){return false}}_attachEvent(ajaxframe,"load",handleResult);$$(formid).target=ajaxframeid;var action=$$(formid).getAttribute("action");action=hostconvert(action);$$(formid).action=action.replace(/\&inajax\=1/g,"")+"&inajax=1";$$(formid).submit();if(submitbtn){submitbtn.disabled=true}doane();return false}function hash(b,d){var d=d?d:32;var f=0;var c=0;var a="";filllen=d-b.length%d;for(c=0;c<filllen;c++){b+="0"}while(f<b.length){a=stringxor(a,b.substr(f,d));f+=d}return a}function stringxor(f,c){var g="";var h="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";var a=Math.max(f.length,c.length);for(var d=0;d<a;d++){var b=f.charCodeAt(d)^c.charCodeAt(d);g+=h.charAt(b%52)}return g}function showloading(a,b){var a=a?a:"block";var b=b?b:"请稍候...";$$("ajaxwaitid").innerHTML=b;$$("ajaxwaitid").style.display=a}function ajaxinnerhtml(h,g){if(h.tagName!="TBODY"){h.innerHTML=g}else{while(h.firstChild){h.firstChild.parentNode.removeChild(h.firstChild)}var f=document.createElement("DIV");f.id=h.id+"_div";f.innerHTML='<table><tbody id="'+h.id+'_tbody">'+g+"</tbody></table>";$$("append_parent").appendChild(f);var a=f.getElementsByTagName("TR");var c=a.length;for(var d=0;d<c;d++){h.appendChild(a[0])}var b=f.getElementsByTagName("INPUT");var c=b.length;for(var d=0;d<c;d++){h.appendChild(b[0])}f.parentNode.removeChild(f)}}function doane(c,b,a){var b=isUndefined(b)?1:b;var a=isUndefined(a)?1:a;e=c?c:window.event;if(!e){e=getEvent()}if(!e){return null}if(b){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}}if(a){if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}}return e}function showMenu(v){var ctrlid=isUndefined(v["ctrlid"])?v:v["ctrlid"];var showid=isUndefined(v["showid"])?ctrlid:v["showid"];var menuid=isUndefined(v["menuid"])?showid+"_menu":v["menuid"];var ctrlObj=$$(ctrlid);var menuObj=$$(menuid);if(!menuObj){return}var mtype=isUndefined(v["mtype"])?"menu":v["mtype"];var evt=isUndefined(v["evt"])?"mouseover":v["evt"];var pos=isUndefined(v["pos"])?"43":v["pos"];var layer=isUndefined(v["layer"])?1:v["layer"];var duration=isUndefined(v["duration"])?2:v["duration"];var timeout=isUndefined(v["timeout"])?250:v["timeout"];var maxh=isUndefined(v["maxh"])?600:v["maxh"];var cache=isUndefined(v["cache"])?1:v["cache"];var drag=isUndefined(v["drag"])?"":v["drag"];var dragobj=drag&&$$(drag)?$$(drag):menuObj;var fade=isUndefined(v["fade"])?0:v["fade"];var cover=isUndefined(v["cover"])?0:v["cover"];var zindex=isUndefined(v["zindex"])?JSMENU["zIndex"]["menu"]:v["zindex"];var ctrlclass=isUndefined(v["ctrlclass"])?"":v["ctrlclass"];var winhandlekey=isUndefined(v["win"])?"":v["win"];zindex=cover?zindex+500:zindex;if(typeof JSMENU["active"][layer]=="undefined"){JSMENU["active"][layer]=[]}for(i in EXTRAFUNC["showmenu"]){try{eval(EXTRAFUNC["showmenu"][i]+"()")}catch(e){}}if(evt=="click"&&in_array(menuid,JSMENU["active"][layer])&&mtype!="win"){hideMenu(menuid,mtype);return}if(mtype=="menu"){hideMenu(layer,mtype)}if(ctrlObj){if(!ctrlObj.getAttribute("initialized")){ctrlObj.setAttribute("initialized",true);ctrlObj.unselectable=true;ctrlObj.outfunc=typeof ctrlObj.onmouseout=="function"?ctrlObj.onmouseout:null;ctrlObj.onmouseout=function(){if(this.outfunc){this.outfunc()}if(duration<3&&!JSMENU["timer"][menuid]){JSMENU["timer"][menuid]=setTimeout(function(){hideMenu(menuid,mtype)},timeout)}};ctrlObj.overfunc=typeof ctrlObj.onmouseover=="function"?ctrlObj.onmouseover:null;ctrlObj.onmouseover=function(e){doane(e);if(this.overfunc){this.overfunc()}if(evt=="click"){clearTimeout(JSMENU["timer"][menuid]);JSMENU["timer"][menuid]=null}else{for(var i in JSMENU["timer"]){if(JSMENU["timer"][i]){clearTimeout(JSMENU["timer"][i]);JSMENU["timer"][i]=null}}}}}}if(!menuObj.getAttribute("initialized")){menuObj.setAttribute("initialized",true);menuObj.ctrlkey=ctrlid;menuObj.mtype=mtype;
menuObj.layer=layer;menuObj.cover=cover;if(ctrlObj&&ctrlObj.getAttribute("fwin")){menuObj.scrolly=true}menuObj.style.position="absolute";menuObj.style.zIndex=zindex+layer;menuObj.onclick=function(e){return doane(e,0,1)};if(duration<3){if(duration>1){menuObj.onmouseover=function(){clearTimeout(JSMENU["timer"][menuid]);JSMENU["timer"][menuid]=null}}if(duration!=1){menuObj.onmouseout=function(){JSMENU["timer"][menuid]=setTimeout(function(){hideMenu(menuid,mtype)},timeout)}}}if(cover){var coverObj=document.createElement("div");coverObj.id=menuid+"_cover";coverObj.style.position="fixed";coverObj.style.zIndex=menuObj.style.zIndex-1;coverObj.style.left=coverObj.style.top="0px";coverObj.style.width="100%";coverObj.style.height=Math.max(document.documentElement.clientHeight,document.body.offsetHeight)+"px";coverObj.style.backgroundColor="transparent";coverObj.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=0)";coverObj.onclick=function(){hideMenu()};$$("append_parent").appendChild(coverObj);_attachEvent(window,"load",function(){coverObj.style.height=Math.max(document.documentElement.clientHeight,document.body.offsetHeight)+"px"},document)}}if(drag){dragobj.style.cursor="move";dragobj.onmousedown=function(event){try{dragMenu(menuObj,event,1)}catch(e){}}}if(cover){$$(menuid+"_cover").style.display=""}if(fade){var O=0;var fadeIn=function(O){if(O>100){clearTimeout(fadeInTimer);return}menuObj.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+O+")";menuObj.style.opacity=O/100;O+=20;var fadeInTimer=setTimeout(function(){fadeIn(O)},40)};fadeIn(O);menuObj.fade=true}else{menuObj.fade=false}menuObj.style.display="";if(ctrlObj&&ctrlclass){ctrlObj.className+=" "+ctrlclass;menuObj.setAttribute("ctrlid",ctrlid);menuObj.setAttribute("ctrlclass",ctrlclass)}if(pos!="*"){setMenuPosition(showid,menuid,pos)}if(BROWSER.ie&&BROWSER.ie<7&&winhandlekey&&$$("fwin_"+winhandlekey)){$$(menuid).style.left=(parseInt($$(menuid).style.left)-parseInt($$("fwin_"+winhandlekey).style.left))+"px";$$(menuid).style.top=(parseInt($$(menuid).style.top)-parseInt($$("fwin_"+winhandlekey).style.top))+"px"}if(maxh&&menuObj.scrollHeight>maxh){menuObj.style.height=maxh+"px";if(BROWSER.opera){menuObj.style.overflow="auto"}else{menuObj.style.overflowY="auto"}}if(!duration){setTimeout("hideMenu('"+menuid+"', '"+mtype+"')",timeout)}if(!in_array(menuid,JSMENU["active"][layer])){JSMENU["active"][layer].push(menuid)}menuObj.cache=cache;if(layer>JSMENU["layer"]){JSMENU["layer"]=layer}}var dragMenuDisabled=false;function dragMenu(b,c,d){c=c?c:window.event;if(d==1){if(dragMenuDisabled||in_array(c.target?c.target.tagName:c.srcElement.tagName,["TEXTAREA","INPUT","BUTTON","SELECT"])){return}JSMENU["drag"]=[c.clientX,c.clientY];JSMENU["drag"][2]=parseInt(b.style.left);JSMENU["drag"][3]=parseInt(b.style.top);document.onmousemove=function(g){try{dragMenu(b,g,2)}catch(f){}};document.onmouseup=function(g){try{dragMenu(b,g,3)}catch(f){}};doane(c)}else{if(d==2&&JSMENU["drag"][0]){var a=[c.clientX,c.clientY];b.style.left=(JSMENU["drag"][2]+a[0]-JSMENU["drag"][0])+"px";b.style.top=(JSMENU["drag"][3]+a[1]-JSMENU["drag"][1])+"px";b.removeAttribute("top_");b.removeAttribute("left_");doane(c)}else{if(d==3){JSMENU["drag"]=[];document.onmousemove=null;document.onmouseup=null}}}}function setMenuPosition(c,f,d){var s=$$(c);var x=f?$$(f):$$(c+"_menu");if(isUndefined(d)||!d){d="43"}var z=parseInt(d.substr(0,1));var w=parseInt(d.substr(1,1));var m=d.indexOf("!")!=-1?1:0;var v=0,l=0,j=0,n=0,y=0,r=0,o=0,h=0,g=0,u=0,q=0,a=0,t=0;if(!x||(z>0&&!s)){return}if(s){v=fetchOffset(s);l=v["left"];j=v["top"];n=s.offsetWidth;y=s.offsetHeight}h=x.offsetWidth;g=x.clientWidth;u=x.offsetHeight;q=x.clientHeight;switch(z){case 1:a=l;t=j;break;case 2:a=l+n;t=j;break;case 3:a=l+n;t=j+y;break;case 4:a=l;t=j+y;break}switch(w){case 0:x.style.left=(document.body.clientWidth-x.clientWidth)/2+"px";o=(document.documentElement.clientHeight-x.clientHeight)/2;break;case 1:r=a-h;o=t-u;break;case 2:r=a;o=t-u;break;case 3:r=a;o=t;break;case 4:r=a-h;o=t;break}var b=Math.max(document.documentElement.scrollTop,document.body.scrollTop);var p=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);if(!m){if(in_array(w,[1,4])&&r<0){r=a;if(in_array(z,[1,4])){r+=n}}else{if(r+h>p+document.body.clientWidth&&l>=h){r=a-h;if(in_array(z,[2,3])){r-=n}else{if(z==4){r+=n}}}}if(in_array(w,[1,2])&&o<0){o=t;if(in_array(z,[1,2])){o+=y}}else{if(o+u>b+document.documentElement.clientHeight&&j>=u){o=t-u;if(in_array(z,[3,4])){o-=y}}}}if(d.substr(0,3)=="210"){r+=69-n/2;o-=5;if(s.tagName=="TEXTAREA"){r-=n/2;o+=y/2}}if(w==0||x.scrolly){if(BROWSER.ie&&BROWSER.ie<7){if(w==0){o+=b}}else{if(x.scrolly){o-=b}x.style.position="fixed"}}if(r){x.style.left=r+"px"}if(o){x.style.top=o+"px"}if(w==0&&BROWSER.ie&&!document.documentElement.clientHeight){x.style.position="absolute";x.style.top=(document.body.clientHeight-x.clientHeight)/2+"px"}if(x.style.clip&&!BROWSER.opera){x.style.clip="rect(auto, auto, auto, auto)"}}function hideMenu(n,b){n=isUndefined(n)?"":n;
b=isUndefined(b)?"menu":b;if(n==""){for(var f=1;f<=JSMENU["layer"];f++){hideMenu(f,b)}return}else{if(typeof n=="number"){for(var d in JSMENU["active"][n]){hideMenu(JSMENU["active"][n][d],b)}return}else{if(typeof n=="string"){var l=$$(n);if(!l||(b&&l.mtype!=b)){return}var o="",c="";if((o=$$(l.getAttribute("ctrlid")))&&(c=l.getAttribute("ctrlclass"))){var a=new RegExp(" "+c);o.className=o.className.replace(a,"")}clearTimeout(JSMENU["timer"][n]);var h=function(){if(l.cache){if(l.style.visibility!="hidden"){l.style.display="none";if(l.cover){$$(n+"_cover").style.display="none"}}}else{l.parentNode.removeChild(l);if(l.cover){$$(n+"_cover").parentNode.removeChild($$(n+"_cover"))}}var p=[];for(var j in JSMENU["active"][l.layer]){if(n!=JSMENU["active"][l.layer][j]){p.push(JSMENU["active"][l.layer][j])}}JSMENU["active"][l.layer]=p};if(l.fade){var m=100;var g=function(p){if(p==0){clearTimeout(j);h();return}l.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+p+")";l.style.opacity=p/100;p-=20;var j=setTimeout(function(){g(p)},40)};g(m)}else{h()}}}}}function getCurrentStyle(f,a,d){if(f.style[a]){return f.style[a]}if(f.currentStyle){return f.currentStyle[a]}else{if(document.defaultView.getComputedStyle(f,null)){var b=document.defaultView.getComputedStyle(f,null);var c=b.getPropertyValue(d);if(!c){c=b[a]}return c}else{if(window.getComputedStyle){var b=window.getComputedStyle(f,"");return b.getPropertyValue(d)}}}}function fetchOffset(f,h){var b=0,a=0,h=!h?0:h;if(f.getBoundingClientRect&&!h){var c=f.getBoundingClientRect();var d=Math.max(document.documentElement.scrollTop,document.body.scrollTop);var g=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);if(document.documentElement.dir=="rtl"){g=g+document.documentElement.clientWidth-document.documentElement.scrollWidth}b=c.left+g-document.documentElement.clientLeft;a=c.top+d-document.documentElement.clientTop}if(b<=0||a<=0){b=f.offsetLeft;a=f.offsetTop;while((f=f.offsetParent)!=null){position=getCurrentStyle(f,"position","position");if(position=="relative"){continue}b+=f.offsetLeft;a+=f.offsetTop}}return{"left":b,"top":a}}var showDialogST=null;function showDialog(msg,mode,t,func,cover,funccancel,leftmsg,confirmtxt,canceltxt,closetime,locationtime){if(mode=="js"){if(typeof func=="function"){func()}else{eval(func)}return}clearTimeout(showDialogST);cover=isUndefined(cover)?(mode=="info"?0:1):cover;leftmsg=isUndefined(leftmsg)?"":leftmsg;mode=in_array(mode,["confirm","notice","info","succ","js"])?mode:"alert";var menuid="fwin_dialog";var menuObj=$$(menuid);var showconfirm=1;confirmtxtdefault="确定";closetime=isUndefined(closetime)?"":closetime;closefunc=function(){if(typeof func=="function"){func()}else{eval(func)}hideMenu(menuid,"dialog")};if(closetime){showDialogST=setTimeout(closefunc,closetime*1000);showconfirm=0}locationtime=isUndefined(locationtime)?"":locationtime;if(locationtime){showDialogST=setTimeout(closefunc,locationtime*1000);showconfirm=0}confirmtxt=confirmtxt?confirmtxt:confirmtxtdefault;canceltxt=canceltxt?canceltxt:"取消";if(menuObj){hideMenu("fwin_dialog","dialog")}menuObj=document.createElement("div");menuObj.style.display="none";menuObj.className="dialog_body";menuObj.id=menuid;$$("append_parent").appendChild(menuObj);var hidedom="";if(!BROWSER.ie){hidedom='<style type="text/css">object{visibility:hidden;}</style>'}var s=hidedom+'<h3 class="dialog_head"><span class="dialog_title">';s+=t?t:'<span class="dialog_title_icon">提示信息</span>';s+='</span><span class="dialog_close_button" id="fwin_dialog_close" onclick="hideMenu(\''+menuid+"', 'dialog')\" title=\"关闭\">X</span></h3>";if(mode=="info"){s+=msg?msg:""}else{s+='<div class="eject_con"><div class="dialog_message_contents">';s+='<i class="'+(mode=="alert"?"alert_error":(mode=="succ"?"alert_right":"alert_info"))+'"></i>'+msg+"</div></div>";s+='<div class="dialog_buttons_bar">'+(leftmsg?'<time class="countdown">'+'<i class="icon-time"></i>'+leftmsg+"</time>":"")+(showconfirm?'<a href="javascript:void(0)" id="fwin_dialog_submit" class="dialog-bottom-btn dialog-bottom-btn mr10">'+confirmtxt+"</a>":"");s+=mode=="confirm"?'<a href="javascript:void(0)" id="fwin_dialog_cancel" class="dialog-bottom-btn" onclick="hideMenu(\''+menuid+"', 'dialog')\">"+canceltxt+"</a>":"";s+="</div>"}menuObj.innerHTML=s;if($$("fwin_dialog_submit")){$$("fwin_dialog_submit").onclick=function(){if(typeof func=="function"){func()}else{eval(func)}hideMenu(menuid,"dialog")}}if($$("fwin_dialog_cancel")){$$("fwin_dialog_cancel").onclick=function(){if(typeof funccancel=="function"){funccancel()}else{eval(funccancel)}hideMenu(menuid,"dialog")};$$("fwin_dialog_close").onclick=$$("fwin_dialog_cancel").onclick}showMenu({"mtype":"dialog","menuid":menuid,"duration":3,"pos":"00","zindex":JSMENU["zIndex"]["dialog"],"cache":0,"cover":cover});try{if($$("fwin_dialog_submit")){$$("fwin_dialog_submit").focus()}}catch(e){}}function showSucc(b){var a=/<script[^\>]*?>([^\x00]*?)<\/script>/ig;b=b.replace(a,"");if(b!==""){showDialog(b,"succ","提示信息",null,true,null,"","","",3)
}}function showError(b){var a=/<script[^\>]*?>([^\x00]*?)<\/script>/ig;b=b.replace(a,"");if(b!==""){showDialog(b,"alert","错误信息",null,true,null,"","","",3)}}function hideWindow(b,c,a){c=isUndefined(c)?1:c;a=isUndefined(a)?1:a;hideMenu("fwin_"+b,"win");if(a&&$$("fwin_"+b)){$$("append_parent").removeChild($$("fwin_"+b))}if(c){hideMenu()}}function ajax_get_confirm(b,a){if(b!=""){showDialog(b,"confirm","",function(){ajaxget(a)})}else{ajaxget(a)}}function get_confirm(b,a){if(b!=""){showDialog(b,"confirm","",function(){window.location=a})}else{window.location=a}};